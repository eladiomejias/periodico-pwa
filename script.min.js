document.getElementById("toolbar_logo").onclick=function(){location.reload(!0)};const options={token:"EE841127754C687C9C41AD7BCB468D69",url:"https://www.marca.com"},options2={token:"EE841127754C687C9C41AD7BCB468D69",url:"https://www.mundodeportivo.com"};var todayDate=(new Date).toLocaleDateString("en-CA"),yesterdayDate=new Date((new Date).setDate((new Date).getDate()-1)).toLocaleDateString("en-CA");const sources={us:{"news.google.com":"News","cnn.com":"CNN","espn.com":"ESPN","sports-int":"Sports Int","nytimes.com":"New York Times","goal.com":"Goal USA","bbc.com":"BBC USA","theverge.com":"The Verge","cnet.com":"CNET","wired.com":"WIRED","techcrunch.com":"TechCrunch","lifehacker.com":"Life Hacker","mashable.com":"Mashable","makeuseof.com":"Make Use Of","androidauthority.com":"Android Authority","gizmodo.com":"Gizmodo","reuters.com":"Reuters","businessinsider.com":"Business Insider","theguardian.com":"The Guardian","uefa.com":"UEFA","sciencedaily.com":"Science Daily","medium.com":"Medium","opensource.com":"Open Source","sportbible.com":"Sport Bible","skysports.com":"Sky Sports","talksport.com":"Talk Sports","zdnet.com":"ZDNET","engadget.com":"Engadget","techradar.com":"Techradar","pcmag.com":"PCMag"},ve:{"latest-news":"Latest News","la-patilla":"La Patilla",notitarde:"Notitarde"},es:{"latest-news":"Ultimas noticias","as.com":"Diario AS",marca:"Diario Marca","mundo-deportivo":"Mundo Deportivo",xataka:"Xataka","elmundo.es":"El Mundo","sport.es":"Diario Sport","sports-int":"Deportes Int","efe.com":"EFE","lavanguardia.com":"La Vanguardia","20minutos.es":"20 Minutos"}};let creator,current,animate;const element={content:document.getElementById("content"),offline:document.getElementById("offline"),toolbar:document.getElementById("toolbar"),blocker:document.getElementById("blocker"),drawer:document.getElementById("drawer"),toolbar_tabs:document.getElementById("toolbar_tabs")},storage={available:function(){try{return localStorage.setItem("available","available"),localStorage.removeItem("available"),!0}catch(e){return!1}},get:function(e){try{return localStorage.getItem(e)}catch(e){}},set:function(e,t){try{localStorage.setItem(e,t)}catch(e){}}};let interval;const left=document.getElementById("toolbar_left"),right=document.getElementById("toolbar_right");left.onpointerdown=function(){element.toolbar_tabs.scrollLeft-=8,interval=setInterval(function(){element.toolbar_tabs.scrollLeft-=8},8)},right.onpointerdown=function(){element.toolbar_tabs.scrollLeft+=8,interval=setInterval(function(){element.toolbar_tabs.scrollLeft+=8},8)},left.onpointerup=left.onpointerleave=left.onpointercancel=right.onpointerup=right.onpointerleave=right.onpointercancel=function(){clearInterval(interval)},element.content.ontouchstart=function(e){element.content.ontouchmove=function(t){const n=t.targetTouches[0].pageX-e.targetTouches[0].pageX,o=t.targetTouches[0].pageY-e.targetTouches[0].pageY;o<=40&&o>=-40?n>80?current.previousSibling&&(current.previousSibling.click(),element.content.ontouchmove=null):n<-80&&current.nextSibling&&(current.nextSibling.click(),element.content.ontouchmove=null):element.content.ontouchmove=null}},document.onkeyup=function(e){const t=e.which||e.keyCode||0;37===t&&current.previousSibling&&current.previousSibling.click(),39===t&&current.nextSibling&&current.nextSibling.click()};let down,move,open=!1;function renderSources(e){const t=[];for(;"drawer_banner"!==element.drawer.lastChild.id;)element.drawer.removeChild(element.drawer.lastChild);Object.keys(sources[e]).forEach(function(n){const o=document.createElement("div");o.className="source",element.drawer.appendChild(o),(creator=document.createElement("span")).innerText=sources[e][n],o.appendChild(creator);const r=document.createElementNS("http://www.w3.org/2000/svg","svg");(creator=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),r.appendChild(creator),o.appendChild(r),t.indexOf(n)>=0&&(r.style.opacity="0"),o.onclick=function(){if(!storage.available())return;let t=storage.get("excluded")?JSON.parse(storage.get("excluded")):[];t.indexOf(n)<0?(t.push(n),storage.set("excluded",JSON.stringify(t)),r.style.opacity="0"):(t.splice(t.indexOf(n),1),storage.set("excluded",JSON.stringify(t)),r.style.opacity="1"),renderTabs(e)}}),renderTabs(e)}function renderTabs(e){const t=storage.get("excluded")?JSON.parse(storage.get("excluded")):[];for(;element.toolbar_tabs.firstChild;)element.toolbar_tabs.removeChild(element.toolbar_tabs.firstChild);for(;"offline"!==element.content.lastChild.id;)element.content.removeChild(element.content.lastChild);Object.keys(sources[e]).forEach(function(n){t.indexOf(n)>-1||((creator=document.createElement("span")).id=n,creator.innerText=sources[e][n],element.toolbar_tabs.appendChild(creator))}),(creator=document.createElement("div")).id="toolbar_indicator",element.toolbar_tabs.appendChild(creator);const n=document.getElementById(storage.get("favorite"));animate=!1,n?n.click():element.toolbar_tabs.firstChild.click()}document.getElementById("toolbar_drawer").onclick=function(){open=!0,element.drawer.scrollTop=0,element.blocker.classList.add("active"),element.drawer.classList.add("active")},document.getElementById("blocker").onclick=function(){open=!1,element.blocker.classList.remove("active"),element.drawer.classList.remove("active")},element.blocker.ontouchstart=function(e){open||(element.drawer.scrollTop=0),down=e.targetTouches[0].pageX,element.blocker.style.width="100%"},element.blocker.ontouchmove=function(e){if(0!==e.changedTouches[0].identifier)return;move=e.targetTouches[0].pageX;let t=Math.min(move,element.drawer.clientWidth);const n=t/element.drawer.clientWidth*.3;element.drawer.style.transition="none",element.drawer.style.transform="translateX("+t+"px)",element.blocker.style.transition="none",element.blocker.style.background="rgba(0,0,0,"+n+")",e.preventDefault()},element.blocker.ontouchend=element.blocker.ontouchcancel=function(e){0===e.changedTouches[0].identifier&&(element.blocker.style.width=null,element.drawer.style.transition=null,element.drawer.style.transform=null,element.blocker.style.transition=null,element.blocker.style.background=null,move>element.drawer.clientWidth*(open?.75:.25)?(open=!0,element.blocker.classList.add("active"),element.drawer.classList.add("active")):(open=!1,element.blocker.classList.remove("active"),element.drawer.classList.remove("active")))};var isPaused=!1;function requestArticles(e){for(;"offline"!==element.content.lastChild.id;)element.content.removeChild(element.content.lastChild);if(element.offline.classList.remove("active"),element.content.classList.remove("active"),!navigator.onLine){const t=JSON.parse(storage.get(e));return t&&combineArticles(e,t.latest,t.top,t.popular),element.offline.classList.add("active"),void element.content.classList.add("active")}let t;const n=window.localStorage.getItem("country").toUpperCase(),o=window.localStorage.getItem("country").toLowerCase();console.log(o),console.log(typeof o);const r=new XMLHttpRequest;new XMLHttpRequest;r.open("GET","https://api.currentsapi.services/v1/latest-news?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&domain="+e,!0),"es"==o&&"sports-int"!=e&&"marca"!=e&&"mundo-deportivo"!=e&&"latest-news"!=e&&"xataka"!=e?r.open("GET","https://api.currentsapi.services/v1/search?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&country="+n+"&domain="+e,!0):"us"==o&&"sports-int"==e?r.open("GET","https://api.currentsapi.services/v1/search?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&category=sports&domain_not=tmz.com,stltoday.com",!0):"es"==o&&"sports-int"==e?r.open("GET","    https://api.currentsapi.services/v1/search?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&country=es&category=sports&domain_not=levante-emv.com,juventudrebelde.cu",!0):"ve"==o&&"la-patilla"==e?(console.log("VE!"),r.open("GET","https://api.currentsapi.services/v1/search?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&country=ve&domain=lapatilla.com",!0)):"ve"==o&&"latest-news"==e?r.open("GET","https://api.currentsapi.services/v1/latest-news?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&country=ve&language=es",!0):"es"==o&&"latest-news"==e?r.open("GET","https://api.currentsapi.services/v1/latest-news?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&country=es&language=es",!0):"es"==o&&"marca"==e?getMarca():"ve"==o&&"notitarde"==e?r.open("GET","https://api.currentsapi.services/v1/search?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&country=ve&domain=notitarde.com",!0):"es"==o&&"xataka"==e?r.open("GET","https://api.currentsapi.services/v1/search?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&language=es&country=es&category=technology,mobile,gadgets,science,programming,entertainment,game&start_date="+yesterdayDate,!0):"es"==o&&"latest-news"==e?r.open("GET","https://api.currentsapi.services/v1/latest-news?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&country=es&language=es",!0):(console.log("OTHER!"),r.open("GET","https://api.currentsapi.services/v1/latest-news?apiKey=dZF37Y3U8FX459mGdCDgS5HN8YJbCHpMFluSxfTvzKYTZ80-&domain="+e,!0)),r.onload=function(){t=200!==r.status||JSON.parse(r.response).news,console.log(JSON.parse(r.response)),combineArticles(e,t,void 0,void 0)},r.send()}function getMarca(){axios.post("https://api.scraperbox.com/scrape",options).then(e=>{const t=e.data;var n=(new DOMParser).parseFromString(t,"text/html"),o=Array.prototype.slice.call(n.getElementsByClassName("mod-futbol")),r=[];console.log(o);for(var a=0;a<o.length;a++){var l,c=o[a].getElementsByClassName("image-item")[0],s=c.getElementsByTagName("img")[0].alt,i=c.href,m=c.getElementsByTagName("img")[0].src;"https://e00-marca.uecdn.es/assets/v21/img/lazyload/imgP.gif"==m.toString()&&(m="");l={title:s,image:m,description:"",url:i,author:"Marca"},r.push(l)}latest={status:"ok",news:r}.news,combineArticles("marca",latest),console.log(latest)}).catch(e=>{console.log(e)})}function getMundoDeportivo(){axios.post("https://api.scraperbox.com/scrape",options2).then(e=>{const t=e.data;var n=(new DOMParser).parseFromString(t,"text/html"),o=Array.prototype.slice.call(n.getElementsByClassName("breakingnews")).childNodes,r=[];console.log(o);for(var a=0;a<o.length;a++){var l,c=o[a].getElementsByClassName("story-header-title")[0],s=c.getElementsByTagName("a")[0].title,i=c.getElementsByTagName("a")[0].href,m=(o[a].getElementsByClassName("story-figure")[0],json.getElementsByTagName("img")[0].src);"https://e00-marca.uecdn.es/assets/v21/img/lazyload/imgP.gif"==m.toString()&&(m="");l={title:s,image:m,description:"",url:i,author:"Mundo Deportivo"},r.push(l)}latest={status:"ok",news:r}.news,combineArticles("mundo-deportivo",latest),console.log(latest)}).catch(e=>{console.log(e)})}function combineArticles(e,t,n,o){if(t){for(;"offline"!==element.content.lastChild.id;)element.content.removeChild(element.content.lastChild);if(storage.set(e,JSON.stringify({latest:t})),!0!==t){(creator=document.createElement("div")).className="title",creator.innerText="Latest headlines",element.content.appendChild(creator);for(let e=0;e<t.length;e++)renderArticle(t[e],e+1===t.length)}element.content.classList.add("active")}}function renderArticle(e,t){const n=document.createElement("div");n.className="article",element.content.appendChild(n),n.onclick=function(){window.open(e.url)},e.image&&((creator=document.createElement("img")).className="article_image",creator.alt=e.title,creator.onload=function(){this.style.opacity="1"},creator.onerror=function(){this.style.display="none"},creator.src="https://images.weserv.nl/?url="+e.image.replace("https://","").replace("http://","")+"&w=400&h=200&t=squaredown",n.appendChild(creator)),(creator=document.createElement("div")).className="article_headline",creator.innerText=e.title,n.appendChild(creator),(creator=document.createElement("div")).className="article_description",creator.innerText=e.description||"Description not available.",n.appendChild(creator);const o=document.createElement("a");if(o.href=e.url,(creator=document.createElement("div")).className="article_information",n.appendChild(creator),e.publishedAt){let t=Math.max(0,Math.ceil(((new Date).getTime()-new Date(e.publishedAt).getTime())/6e4));t<60?creator.innerText=t+(1===t?" minute":" minutes"):t>=60&&t<1440?(t=Math.floor(t/60),creator.innerText=t+(1===t?" hour":" hours")):t>=1440&&(t=Math.floor(t/1440),creator.innerText=t+(1===t?" day":" days")),creator.innerText+=" ago on "+o.hostname.replace("www.","")}else creator.innerText="On "+o.hostname.replace("www.","");t&&(n.style.border="none")}element.toolbar_tabs.onclick=function(e){if("SPAN"!==e.target.tagName)return;current&&(current.style.color=null),(current=e.target).style.color="var(--theme-title)";const t=document.getElementById("toolbar_indicator"),n=current.offsetLeft-element.toolbar_tabs.scrollLeft-(element.toolbar_tabs.clientWidth/2-current.clientWidth/2),o=Math.max(n,-element.toolbar_tabs.scrollLeft),r=Math.min(n,element.toolbar_tabs.scrollWidth-element.toolbar_tabs.clientWidth-element.toolbar_tabs.scrollLeft),a=(n<0?o:r)/16,l=(current.clientWidth-t.clientWidth)/16,c=(current.offsetLeft-t.offsetLeft)/16;if(!1===animate)return animate=void 0,element.toolbar_tabs.scrollLeft=current.offsetLeft-element.toolbar_tabs.clientWidth/2+current.clientWidth/2,t.style.width=current.clientWidth-t.clientWidth+"px",t.style.left=current.offsetLeft-t.offsetLeft+"px",void requestArticles(current.id);let s=0,i=element.toolbar_tabs.scrollLeft,m=t.clientWidth,d=t.offsetLeft;const u=setInterval(function(){i+=a,m+=l,d+=c,element.toolbar_tabs.scrollLeft=i,t.style.width=m+"px",t.style.left=d+"px",16===++s&&clearInterval(u)},12);requestArticles(current.id)};let scroll=0;element.content.onscroll=function(){element.toolbar.className=element.content.scrollTop>56&&element.content.scrollTop>scroll?"active":null,scroll=element.content.scrollTop},document.getElementById("toolbar_favorite").onclick=function(){const e=document.getElementById("toolbar_message"),t=document.getElementById("toolbar_message_inner");t.innerHTML=current.innerHTML+" set as default source.",e.className="active",t.style.transition="transform 320ms",t.style.transform="translateY(40px)",setTimeout(function(){e.className=null,t.style.transform="translateY(80px)"},800),setTimeout(function(){t.style.transition=null,t.style.transform=null},1200),storage.set("favorite",current.id)},document.getElementById("offline_action").onclick=function(){current.click()},document.getElementById("drawer_us").onclick=function(){storage.set("country","us"),document.getElementById("drawer_us").className="active",document.getElementById("drawer_es").className=null,document.getElementById("drawer_ve").className=null,renderSources("us")},document.getElementById("drawer_ve").onclick=function(){storage.set("country","ve"),document.getElementById("drawer_us").className=null,document.getElementById("drawer_es").className=null,document.getElementById("drawer_ve").className="active",renderSources("ve")},document.getElementById("drawer_es").onclick=function(){storage.set("country","es"),document.getElementById("drawer_es").className="active",document.getElementById("drawer_us").className=null,document.getElementById("drawer_ve").className=null,renderSources("es")},storage.get("country")?document.getElementById("drawer_"+storage.get("country")).click():(document.getElementById("drawer_us").click(),storage.set("country","us"));